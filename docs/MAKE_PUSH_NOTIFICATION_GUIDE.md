# Make(메이크)로 제작업체별 자동 푸시 알림 설정 가이드

## 개요

**Make.com**(구 Integromat)을 사용하면 **앱 코드 수정 없이** Google Sheets `jobs_raw`에 새 행이 추가될 때, 해당 제작업체(vendor)에게만 자동으로 푸시 알림을 보낼 수 있습니다.

---

## 1. Make로 가능한 것

| 기능 | 설명 |
|------|------|
| **Google Sheets 감지** | "Watch New Rows" 트리거로 `jobs_raw` 시트에 새 행 추가 시 즉시 실행 |
| **제작업체별 분기** | Router로 `vendor`(출력실) 컬럼 값에 따라 크림팩토리 / 스카이인디고 등으로 분기 |
| **자동 알림 전송** | 분기별로 해당 업체용 채널(Slack, 이메일, 카카오 알림톡 등)로 메시지 전송 |

즉, **수동이 아니라 자동**으로, **해당 제작업체에게만** 알림이 가도록 구성할 수 있습니다.

---

## 2. 기본 시나리오 구조

```
[Google Sheets - Watch New Rows]  →  [Router: vendor 값으로 분기]
         │
         ├─ vendor = "크림팩토리"  →  [크림팩토리 알림 전송]
         ├─ vendor = "스카이인디고" →  [스카이인디고 알림 전송]
         └─ 그 외                  →  (선택) 기타 처리 또는 무시
```

- **트리거**: `jobs_raw` 시트, "Watch New Rows"
- **Router**: 새 행의 `vendor`(출력실) 컬럼 값으로 경로 분기
- **알림 모듈**: 각 경로마다 해당 업체용 알림 앱 연결

---

## 3. Make 시나리오 설정 절차

### 3.1 Google Sheets 연동 (즉시 트리거)

1. **Make.com** 로그인 후 새 시나리오 생성
2. **Google Sheets** 모듈 추가 → **Watch New Rows** 선택
3. **연결**: Google 계정 연결 (해당 스프레드시트 접근 권한 부여)
4. **스프레드시트**: 제작 의뢰 관리용 스프레드시트 선택
5. **시트**: `jobs_raw` 선택
6. **실시간 트리거**(권장):  
   - "Watch Changes" 또는 Make용 Google Sheets 애드온을 사용하면 **새 행 추가 시 곧바로** 실행  
   - 애드온 없이 "Watch New Rows"만 쓰면 **주기적 폴링**(예: 15분마다)으로 새 행 감지

### 3.2 Router로 제작업체별 분기

1. **Router** 모듈 추가 (트리거 다음에 연결)
2. **경로 추가**: 제작업체 수만큼 경로 생성 (예: 크림팩토리, 스카이인디고)
3. 각 경로의 **필터(Filter)** 설정:
   - **Label**: "크림팩토리"
   - **Condition**: `vendor`(또는 출력실 컬럼에 해당하는 필드명) **Equal** `크림팩토리`
4. 다른 경로도 동일하게 `vendor` = `스카이인디고` 등으로 설정

이렇게 하면 **해당 제작업체에만** 알림 경로가 실행됩니다.

### 3.3 알림 전송 모듈 (경로별로 1개씩)

각 Router 경로 끝에 **알림을 보내는 모듈**을 붙입니다. 선택지는 아래와 같습니다.

---

## 4. 알림 채널별 구현 방법

### 옵션 A: Slack (가장 간단)

- **Slack** 모듈 → "Create a Message" 등 선택
- 채널 또는 사용자 지정
- 메시지 내용에 Make 변수로 넣기:
  - `{{job_id}}`, `{{media_name}}`, `{{vendor}}`, `{{due_date}}` 등 (Google Sheets 컬럼명에 맞게)
- **장점**: 설정 간단, 무료, 자동 푸시
- **단점**: 제작업체가 Slack을 써야 함

### 옵션 B: 이메일

- **Email** 또는 **Gmail** 모듈로 해당 업체 이메일 주소로 발송
- **장점**: 별도 앱 없이 사용 가능
- **단점**: 푸시보다는 이메일 확인 필요

### 옵션 C: 카카오 알림톡 (SOLAPI 등 연동)

- **HTTP** 모듈 또는 **SOLAPI** 등 카카오 알림톡 API 연동 앱 사용
- Make 블로그 예: [Make를 활용한 배송시작 알림톡 발송 자동화 | SOLAPI](https://solapi.com/blog/make_for_begginer/)
- **장점**: 카카오톡으로 자동 문자 수신
- **단점**: SOLAPI 등 유료 서비스 가입 및 알림톡 템플릿 승인 필요

### 옵션 D: 웹훅(HTTP)

- **Webhooks** 모듈 → "Custom webhook" 등으로 URL 지정
- 각 제작업체별로 다른 URL(업체용 봇/서비스)을 Router 경로마다 설정
- **장점**: Telegram, Discord, 자체 서비스 등 어떤 쪽이든 연동 가능
- **단점**: 받는 쪽(업체)에서 웹훅 받을 서비스 준비 필요

---

## 5. 카카오톡 단톡방에 “자동”으로 뜨게 하려면

- **일반 카카오톡 단톡방 링크**만 있으면 Make가 직접 그 방에 메시지를 넣는 기능은 **없습니다**. (수동 알림용 링크로만 사용 가능)
- 단톡방에 자동 메시지를 보내려면 아래 중 하나가 필요합니다.

| 방법 | 설명 |
|------|------|
| **카카오 알림톡** | SOLAPI 등 연동 → Make에서 API 호출 → 해당 업체 전화번호로 알림톡 발송 (단톡방이 아니라 문자 형태) |
| **단톡방 봇** | 카카오 비즈니스/챗봇 등으로 단톡방에 봇 초대 후, Make는 그 봇이 제공하는 API/웹훅을 호출 |
| **Slack/Telegram 등** | Make로 Slack·Telegram에 보내고, 업체는 그 앱으로 푸시 알림 수신 (가장 구현 쉬움) |

정리하면, **Make만으로 “단톡방 링크에 자동 푸시”를 구현하는 건 불가**하고, **Make + 알림톡/봇/다른 메신저** 조합으로 “해당 제작업체에게 자동 푸시”는 가능합니다.

---

## 6. 요약 및 추천

- **Make 사용 시**: Google Sheets에 리스트(새 행)가 추가되면, **해당 제작업체(vendor)에게만** 자동 푸시 알림을 보내는 구조를 **코드 수정 없이** 만들 수 있습니다.
- **추천 순서**  
  1) **Slack/Telegram** 등으로 제작업체별 채널에 자동 알림 (가장 빠름)  
  2) **이메일**로 자동 발송  
  3) **카카오 알림톡**(SOLAPI 등)으로 문자형 푸시  
  4) 단톡방은 “수동용 링크”로만 두고, 자동은 위 채널로 보내기

이 가이드를 참고해 Make 시나리오만 구성하면, 앱에서 별도 푸시 발송 로직을 구현하지 않아도 제작업체별 자동 푸시 알림이 가능합니다.
